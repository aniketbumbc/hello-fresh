{"ast":null,"code":"import _toConsumableArray from\"/Users/aniketbhavsar/Desktop/Code Challenage/Hello Fresh/aniketbumbc-recipe-selection-react-test/hello-fresh/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/aniketbhavsar/Desktop/Code Challenage/Hello Fresh/aniketbumbc-recipe-selection-react-test/hello-fresh/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Row,Col}from'../../components/Grid';import Flex from'../../components/Flex';import Box from'../../components/Box';import RecipeCard from'./RecipeCard';import PriceInfo from'./PriceInfo';import{calculateRecipeBoxTotal,getUniqueRecipes}from'./price';import useFetchHelloFreshBox from'../../hooks/useFetchHelloFreshBox';var Recipes=function Recipes(){// This state stores the array of recipes with the changes performed by the customer.\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useFetchHelloFreshBo=useFetchHelloFreshBox(),data=_useFetchHelloFreshBo.data,loading=_useFetchHelloFreshBo.loading;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedRecipesInBox=_useState4[0],setSelectedRecipesInBox=_useState4[1];/**\n   * Metohd handleAddRecipe accept recipeId.\n   * Increment newly added recipe selected by one.\n   * added on selectedRecipesInBox.\n   * @param {*} recipeId\n   */var handleAddRecipe=function handleAddRecipe(recipeId){var newlyAddedRecipe=recipes.find(function(recipe){return recipe.id===recipeId;});if(newlyAddedRecipe.id===recipeId){newlyAddedRecipe.selected+=1;}setSelectedRecipesInBox([].concat(_toConsumableArray(selectedRecipesInBox),[newlyAddedRecipe]));};/**\n   * Metohd handleAddRecipe accept recipeId.\n   * decrement selected recipe selected by one.\n   * removed from selectedRecipesInBox.\n   * @param {*} recipeId\n   */var handleRemoveRecipe=function handleRemoveRecipe(recipeId){var removedRecipe=recipes.find(function(recipe){return recipe.id===recipeId;});if(removedRecipe.id===recipeId){removedRecipe.selected-=1;}var reomveRecipeIndex=selectedRecipesInBox.findIndex(function(recipe){return recipe.id===recipeId;});setSelectedRecipesInBox(selectedRecipesInBox.filter(function(recipe,index){return index!==reomveRecipeIndex;}));};/**\n   * totalPrice is based on @selectedRecipesInBox @baseRecipePrice @shippingPrice\n   */var totalPrice=selectedRecipesInBox&&!!selectedRecipesInBox.length&&calculateRecipeBoxTotal(data.baseRecipePrice,data.shippingPrice,selectedRecipesInBox);/**\n   * Method setSelectedRecipesInBox which is selected.\n   * @param {*} fetchedRecipes\n   */var handleSelectedRecipes=function handleSelectedRecipes(fetchedRecipes){setSelectedRecipesInBox(fetchedRecipes.filter(function(recipe){return recipe.selected>0;}));};React.useEffect(function(){var fetchedRecipes=data.recipes;if(fetchedRecipes){setRecipes(fetchedRecipes);handleSelectedRecipes(fetchedRecipes);}},[setRecipes,data]);if(loading){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:6},/*#__PURE__*/React.createElement(\"h3\",null,data.headline)),/*#__PURE__*/React.createElement(Col,{sm:6},/*#__PURE__*/React.createElement(Flex,{alignItems:\"center\",justifyContent:\"flex-end\"},/*#__PURE__*/React.createElement(Box,{textAlign:\"right\",mr:\"xs\"},/*#__PURE__*/React.createElement(\"h3\",null,totalPrice)),/*#__PURE__*/React.createElement(PriceInfo,{summary:getUniqueRecipes(selectedRecipesInBox),totalPrice:totalPrice,baseRecipePrice:data.baseRecipePrice,shippingPrice:data.shippingPrice})))),/*#__PURE__*/React.createElement(Row,null,recipes.map(function(recipe){return/*#__PURE__*/React.createElement(Col,{sm:12,md:6,xl:4,key:recipe.id},/*#__PURE__*/React.createElement(Box,{mb:\"md\"},/*#__PURE__*/React.createElement(RecipeCard,Object.assign({},recipe,{handleAddRecipe:handleAddRecipe,handleRemoveRecipe:handleRemoveRecipe,minRecipesSelected:selectedRecipesInBox.length>=data.min,maxRecipesSelected:selectedRecipesInBox.length>=data.max}))));})));};export default Recipes;","map":{"version":3,"names":["React","useState","Row","Col","Flex","Box","RecipeCard","PriceInfo","calculateRecipeBoxTotal","getUniqueRecipes","useFetchHelloFreshBox","Recipes","_useState","_useState2","_slicedToArray","recipes","setRecipes","_useFetchHelloFreshBo","data","loading","_useState3","_useState4","selectedRecipesInBox","setSelectedRecipesInBox","handleAddRecipe","recipeId","newlyAddedRecipe","find","recipe","id","selected","concat","_toConsumableArray","handleRemoveRecipe","removedRecipe","reomveRecipeIndex","findIndex","filter","index","totalPrice","length","baseRecipePrice","shippingPrice","handleSelectedRecipes","fetchedRecipes","useEffect","createElement","Fragment","sm","headline","alignItems","justifyContent","textAlign","mr","summary","map","md","xl","key","mb","Object","assign","minRecipesSelected","min","maxRecipesSelected","max"],"sources":["/Users/aniketbhavsar/Desktop/Code Challenage/Hello Fresh/aniketbumbc-recipe-selection-react-test/hello-fresh/src/modules/recipes/RecipesList.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { Row, Col } from '../../components/Grid';\nimport Flex from '../../components/Flex';\nimport Box from '../../components/Box';\nimport RecipeCard from './RecipeCard';\nimport PriceInfo from './PriceInfo';\nimport { calculateRecipeBoxTotal, getUniqueRecipes } from './price';\nimport useFetchHelloFreshBox from '../../hooks/useFetchHelloFreshBox';\n\nconst Recipes = () => {\n  // This state stores the array of recipes with the changes performed by the customer.\n  const [recipes, setRecipes] = useState([]);\n  const { data, loading } = useFetchHelloFreshBox();\n  const [selectedRecipesInBox, setSelectedRecipesInBox] = useState([]);\n\n  /**\n   * Metohd handleAddRecipe accept recipeId.\n   * Increment newly added recipe selected by one.\n   * added on selectedRecipesInBox.\n   * @param {*} recipeId\n   */\n\n  const handleAddRecipe = (recipeId) => {\n    const newlyAddedRecipe = recipes.find((recipe) => recipe.id === recipeId);\n    if (newlyAddedRecipe.id === recipeId) {\n      newlyAddedRecipe.selected += 1;\n    }\n    setSelectedRecipesInBox([...selectedRecipesInBox, newlyAddedRecipe]);\n  };\n\n  /**\n   * Metohd handleAddRecipe accept recipeId.\n   * decrement selected recipe selected by one.\n   * removed from selectedRecipesInBox.\n   * @param {*} recipeId\n   */\n\n  const handleRemoveRecipe = (recipeId) => {\n    const removedRecipe = recipes.find((recipe) => recipe.id === recipeId);\n    if (removedRecipe.id === recipeId) {\n      removedRecipe.selected -= 1;\n    }\n    const reomveRecipeIndex = selectedRecipesInBox.findIndex((recipe) => recipe.id === recipeId);\n    setSelectedRecipesInBox(\n      selectedRecipesInBox.filter((recipe, index) => index !== reomveRecipeIndex)\n    );\n  };\n\n  /**\n   * totalPrice is based on @selectedRecipesInBox @baseRecipePrice @shippingPrice\n   */\n\n  const totalPrice =\n    selectedRecipesInBox &&\n    !!selectedRecipesInBox.length &&\n    calculateRecipeBoxTotal(data.baseRecipePrice, data.shippingPrice, selectedRecipesInBox);\n\n  /**\n   * Method setSelectedRecipesInBox which is selected.\n   * @param {*} fetchedRecipes\n   */\n\n  const handleSelectedRecipes = (fetchedRecipes) => {\n    setSelectedRecipesInBox(fetchedRecipes.filter((recipe) => recipe.selected > 0));\n  };\n\n  React.useEffect(() => {\n    const { recipes: fetchedRecipes } = data;\n\n    if (fetchedRecipes) {\n      setRecipes(fetchedRecipes);\n      handleSelectedRecipes(fetchedRecipes);\n    }\n  }, [setRecipes, data]);\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    <>\n      <Row>\n        <Col sm={6}>\n          <h3>{data.headline}</h3>\n        </Col>\n        <Col sm={6}>\n          <Flex alignItems=\"center\" justifyContent=\"flex-end\">\n            <Box textAlign=\"right\" mr=\"xs\">\n              <h3>{totalPrice}</h3>\n            </Box>\n            <PriceInfo\n              summary={getUniqueRecipes(selectedRecipesInBox)}\n              totalPrice={totalPrice}\n              baseRecipePrice={data.baseRecipePrice}\n              shippingPrice={data.shippingPrice}\n            />\n          </Flex>\n        </Col>\n      </Row>\n\n      <Row>\n        {recipes.map((recipe) => (\n          <Col sm={12} md={6} xl={4} key={recipe.id}>\n            <Box mb=\"md\">\n              <RecipeCard\n                {...recipe}\n                handleAddRecipe={handleAddRecipe}\n                handleRemoveRecipe={handleRemoveRecipe}\n                minRecipesSelected={selectedRecipesInBox.length >= data.min}\n                maxRecipesSelected={selectedRecipesInBox.length >= data.max}\n              />\n            </Box>\n          </Col>\n        ))}\n      </Row>\n    </>\n  );\n};\n\nexport default Recipes;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}